# Commerce Barrier Analytics (DA-10)

![Python](https://img.shields.io/badge/Python-3.13-blue)
![ML](https://img.shields.io/badge/ML-Classification-green)
![Streamlit](https://img.shields.io/badge/UI-Streamlit-orange)

## Preview проекта

**Commerce Barrier Analytics** — это ИИ-система для интернет-магазинов, которая выявляет реальные причины отказа пользователей от покупки (барьеры) и автоматически создаёт персонализированные рекомендации и email для их устранения.

Проект построен **исключительно на синтетических данных** и предназначен как прототип аналитической и ML-системы для e-commerce.

---

## Основные возможности

### 1. Анализ поведения пользователей
Используются поведенческие и контекстные признаки:
- Просмотры товаров (`x1_views`)
- Загрузка PDF с характеристиками (`x2_chars_pdf`)
- Просмотр страниц доставки и сборки (`x3_ship_page`, `x5_assembly_page`)
- Использование калькулятора доставки (`x4_calc_used`, `x4_ship_cost`)
- Просмотр гарантий и возврата (`x6_warranty`, `x7_return_page`)
- История email (`x8_email_clicks`)
- Диалоги с поддержкой (`x9_chat_text`)
- Отзывы о товарах (`x10_reviews`)

---

### 2. Классификация барьеров покупки

ML-модель классифицирует пользователя по доминирующему барьеру:

| Класс | Барьер |
|------:|--------|
| 1 | Цена |
| 2 | Размер / соответствие |
| 3 | Сложность сборки или доставки |
| 4 | Недостаток доверия / качество |
| 5 | Страх возврата |

Модель обучается на комбинации:
- числовых признаков  
- TF-IDF представлений текста чатов  

---

### 3. Генерация персонализированных email

- Для каждого барьера существует специализированный шаблон письма
- Генерация рекомендаций может быть:
  - шаблонной (`emails/templates.py`)
  - или LLM-based (через `qwen3`)
- Контент ориентирован на **устранение причины отказа**, а не только скидки.

---

### 4. Оценка эффективности кампаний

- Симуляция:
  - открытий email
  - кликов
- Вероятности зависят от типа барьера
- Используется для:
  - оценки стратегий
  - демонстрации A/B-подходов
  - офлайн-аналитики

---

## Пример синтетических данных

| user_id | product_name | x1_views | x2_chars_pdf | x4_calc_used | x4_ship_cost | x9_chat_text | Barrier_Class |
|--------:|-------------|---------:|-------------:|-------------:|-------------:|--------------|---------------|
| 1000 | Шкаф-купе "Лофт" | 5 | 7 | 0 | 0.0 | высота глубина | 2 |
| 1001 | Шкаф-купе "Лофт" | 1 | 1 | 0 | 0.0 | установка инструкция | 3 |
| 1002 | Стеллаж | 3 | 1 | 0 | 0.0 | инструмент нет | 3 |
| 1003 | Тумба | 11 | 6 | 0 | 0.0 | не помещается | 2 |
| 1004 | Тумба | 4 | 2 | 1 | 1717.38 | дорого цена | 1 |

> Все данные полностью синтетические!

---

## Архитектура репозитория

```bash
Commerce-Barrier-Analytics/
│
├── synthetic_data/              # CSV с синтетическими данными
│
├── models/                      # Сохранённые модели и препроцессоры
│   ├── barrier_model.joblib
│   └── preprocessor.joblib
│
├── notebooks/                   # Jupyter ноутбуки (EDA, обучение)
│
├── src/
│   ├── data/
│   │   ├── data_generator.py    # Генерация синтетики
│   │   └── data_loader.py       # Загрузка данных
│   │
│   ├── features/
│   │   └── preprocessing.py    # Fit/transform признаков
│   │
│   ├── models/
│   │   ├── barrier_model.py    # ML-обёртка
│   │   ├── train.py            # Обучение модели
│   │   └── predict.py          # Предсказания
│   │
│   ├── emails/
│   │   └── templates.py        # Email шаблоны
│   │
│   ├── evaluation/
│   │   └── simulation.py       # Симуляция open/click rate
│   │
│   └── utils/
│       └── text_processing.py
│
├── ui/                          # Streamlit UI (в разработке)
├── tests/
├── requirements.txt
└── README.md
```

---

## Технологии

- Python 3.13
- pandas, scikit-learn, XGBoost
- OpenAI/LLM API для генерации email
- Streamlit для UI (в разработке)
- Jupyter Notebook для экспериментов и анализа
- GitHub для версии и совместной работы

---

## Как запустить

1. Клонировать репозиторий:
```bash
git clone https://github.com/BodgeDook/Commerce-Barrier-Analytics.git
cd Commerce-Barrier-Analytics
```

2. Установить зависимости:
```bash
pip install -r requirements.txt
```

3. Обучить модель:
```bash
python src/models/train.py
```

3. Запустить Streamlit (когда UI готов):
```
streamlit run ui/app.py
```

---

## Статус Проекта
- Демо-версия